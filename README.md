# 🎁 电子礼簿系统 (Gift List System)

一个基于 **Next.js 15** 的现代化电子礼簿系统，完美模拟传统纸质礼簿格式，支持本地存储和 GitHub 云端同步。

## ✨ 核心特性

| 功能 | 描述 | 状态 |
|------|------|------|
| 📦 **双存储** | localStorage (默认) + GitHub 云端 (可选) | ✅ |
| 🔒 **数据加密** | AES-256 加密 + SHA-256 密码哈希 | ✅ |
| 🎨 **主题系统** | 喜庆红 / 肃穆灰 双主题 | ✅ |
| 📜 **传统礼簿** | 竖排文字 + 12列网格布局 | ✅ |
| 📄 **导出功能** | PDF 打印 / Excel 导出 | ✅ |
| 🖥️ **双屏联动** | 实时同步展示（适合大屏） | ✅ |
| 📱 **响应式** | 桌面/平板/移动端适配 | ✅ |
| 🔄 **路由修复** | 防止无限循环跳转 | ✅ |

## 🚀 快速开始

### 1. 安装依赖
```bash
npm install
# 或
pnpm install
```

### 2. 启动开发服务器
```bash
npm run dev
```

### 3. 访问系统
打开浏览器访问：`http://localhost:3000`

## 📖 使用流程

### 第一步：创建事项
首次访问会自动跳转到创建页面：
- 填写事项名称、时间、管理密码
- 选择主题（喜事/白事）
- 可选：配置 GitHub 云端同步

### 第二步：录入礼金
在主界面左侧表单：
- 输入姓名、金额（自动显示中文大写）
- 选择收款类型（现金/微信/支付宝/其他）
- 添加备注（可选）

### 第三步：查看与导出
- **礼簿展示**：右侧显示传统格式
- **打印/PDF**：保存纸质版
- **导出Excel**：数据备份
- **开启副屏**：大屏幕实时展示

## 🏗️ 项目结构

```
gift-list/
├── src/
│   ├── app/
│   │   ├── globals.css          # 全局样式 + 主题系统
│   │   ├── page.tsx             # 首页（智能路由）
│   │   ├── setup/page.tsx       # 创建事项
│   │   ├── main/page.tsx        # 主界面（录入+展示）
│   │   ├── guest-screen/page.tsx # 副屏展示
│   │   └── test-redirect/page.tsx # 测试工具
│   ├── lib/
│   │   ├── crypto.ts            # AES-256 加密
│   │   ├── utils.ts             # 工具函数
│   │   └── github.ts            # GitHub API
│   └── types/
│       └── index.ts             # 类型定义
├── 文档/
│   ├── 使用指南.md              # 完整使用说明
│   ├── 完成总结.md              # 项目总结
│   ├── STYLES.md                # 样式系统
│   └── 项目文件清单.md          # 文件清单
└── 配置文件/
    ├── package.json
    ├── tsconfig.json
    └── tailwind.config.ts
```

## 🎯 技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| Next.js | 15.1.0 | 框架 |
| React | 19.0.0 | UI 库 |
| TypeScript | 5.x | 类型系统 |
| Tailwind CSS | 3.4.0 | 样式 |
| CryptoJS | 4.2.0 | 加密 |
| xlsx | 0.18.5 | Excel 导出 |

## 📚 文档导航

### 使用相关
- 📖 **[使用指南](使用指南.md)** - 完整操作流程
- 🚀 **[快速开始](START.md)** - 5分钟上手

### 技术相关
- 🎨 **[样式说明](STYLES.md)** - 主题系统详解
- 🔧 **[路由修复](FIX_REDIRECT.md)** - 问题解决方案
- 📦 **[文件清单](项目文件清单.md)** - 完整文件列表

### 项目总结
- ✅ **[完成总结](完成总结.md)** - 功能实现详情
- 📊 **[项目概要](PROJECT_SUMMARY.md)** - 技术架构

## 🎨 主题预览

### 喜庆红 (喜事)
- 主色：#c00 (深红)
- 按钮：#dc2626 (亮红)
- 背景：#fff2f2 (浅红)

### 肃穆灰 (白事)
- 主色：#374151 (深灰)
- 按钮：#4b5563 (中灰)
- 背景：#f3f4f6 (浅灰)

### 礼簿格式
```
┌─────────────────────────────────────────────┐
│  姓　名  │  类型  │      金　额      │ ... │
│  张　三  │  现金  │  壹仟元整  ¥1000 │     │
│  李　四  │  微信  │  伍佰元整  ¥500  │     │
└─────────────────────────────────────────────┘
```

## 🔒 数据安全

### 加密机制
- **AES-256**：所有礼金数据加密存储
- **SHA-256**：管理密码单向哈希
- **客户端加密**：数据在浏览器加密后才传输/存储

### 存储选项
| 方式 | 优点 | 缺点 | 适用场景 |
|------|------|------|----------|
| **localStorage** | 无需登录，快速访问 | 仅限当前设备 | 个人使用 |
| **GitHub** | 多设备同步，云端备份 | 需要 Token | 团队/多设备 |

## 🎯 使用场景

1. **婚礼礼簿** - 传统格式，喜庆红色
2. **生日宴会** - 记录祝福，导出备份
3. **乔迁之喜** - 电子化管理
4. **白事礼簿** - 肃穆灰色，庄重风格
5. **活动收款** - 多人协作，实时同步

## 🔍 测试与调试

### 路由测试
访问：`http://localhost:3000/test-redirect`

功能：
- ✅ 检查存储状态
- ✅ 清除所有数据
- ✅ 手动触发跳转
- ✅ 实时日志查看

### 浏览器控制台
```javascript
// 查看事件数据
JSON.parse(localStorage.getItem('giftlist_events') || '[]')

// 查看当前会话
JSON.parse(sessionStorage.getItem('currentEvent') || '{}')

// 清除数据
localStorage.clear()
sessionStorage.clear()
```

## ❓ 常见问题

### Q: 页面在 / 和 /main 之间闪烁？
**A**: 清除浏览器缓存 `Ctrl+Shift+R`，或重启开发服务器

### Q: 数据没有保存？
**A**: 检查浏览器是否禁用了 localStorage，或使用了无痕模式

### Q: GitHub 同步失败？
**A**: 确认 Token 有 repo 权限，仓库存在，网络正常

### Q: 如何切换事项？
**A**: 清除 sessionStorage 后重新访问首页

## 📦 生产部署

### 构建项目
```bash
npm run build
```

### 启动生产服务器
```bash
npm start
```

## 📄 许可证

MIT License - 自由使用，欢迎贡献

---

**项目完成！开始使用吧！** 🎉

**快速启动**：
```bash
npm run dev
# 然后访问 http://localhost:3000
```

## 📞 技术支持

如有问题，请查看：
1. [使用指南](使用指南.md) - 操作问题
2. [路由修复](FIX_REDIRECT.md) - 跳转问题
3. [样式说明](STYLES.md) - 样式问题

